webpackJsonp([6],{J2V1:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Dd8w"),s=a.n(l),i=a("NYxO"),o=a("mNlw"),r={name:"DeriveQuota",mixins:[],components:{},data:function(){return{searchForm:{classify1:"",classify2:"",classify3:""},aLevel1:[],aLevel2:[],aLevel3:[],aaLevel2:[],aaLevel3:[],aQuotaItems:[],agencies:[],quotaTypes:[{value:1,label:"基础指标"},{value:2,label:"分析指标"}],baseQuotas:[],tableHeadStyle:{"font-weight":"bold",color:"#333"},pageSize:5,quotaDatas:[],quotaTotal:0,quotaPage:1,multipleSelection:[],addQuotaTitle:"",addQuotaVisible:!1,quotaForm:{classify1:"",classify1Name:"",classify2:"",classify2Name:"",classify3:"",classify3Name:"",indiModel:"",indiModelName:"",indiType:"",baseList:[],indiName:"",indiCode:"",rule:"",agency:"",version:"",comment:"",creator:"",create_time:""},formLabelWidth:"120px",tableHeight:"100px",active:"QuotaResultView",resultQuota:"",quotaResultDatas:[],quotaResultTotal:0,quotaResultPage:1,quotaScheduleDatas:[],quotaScheduleTotal:0,quotaSchedulePage:1,multipleScheduleSelection:[],scheduleForm:{processInst:"",instType:"",isValid:"",creator:"",create_time:""},aDirectiveTypes:[{id:1,name:"SQL语句"},{id:2,name:"存储过程"}],addScheduleTitle:"",addScheduleVisible:!1}},beforeRouteEnter:function(e,t,a){a()},created:function(){this.getOrgList(),this.getTypes("aLevel1"),this.getBaseQuotas(),this.getQuotaDatas()},mounted:function(){this.setHeight()},computed:{},methods:s()({},Object(i.b)(["getCategoryListAction","getQuotaListAction","addQuotaAction","updateQuotaAction","deleteQuotaAction","getOrgListAction","getResultListAction","getScheduleListAction","addScheduleAction","updateScheduleAction","deleteScheduleAction"]),{getOrgList:function(){var e=this;this.getOrgListAction({}).then(function(t){e.agencies=t.list}).catch(function(t){e.$message.error(t)})},getTypes:function(e,t){var a=this,l={};t&&(l.pid=t),this.getCategoryListAction(l).then(function(t){a[e]=t.list}).catch(function(e){a.$message.error(e)})},getBaseQuotas:function(){var e=this;this.getQuotaListAction({type:0}).then(function(t){e.baseQuotas=t.list}).catch(function(t){e.$message.error(t)})},convertBasicQuotas:function(e){var t="";return e.forEach(function(e,a){t+=","+e.basicName}),""===t?t:t.substr(1)},getQuotaDatas:function(){var e=this,t={type:1,pageSize:this.pageSize,pageNum:this.quotaPage,classify1:this.searchForm.classify1,classify2:this.searchForm.classify2,classify3:this.searchForm.classify3},a=this.$loading({});this.getQuotaListAction(t).then(function(t){a.close(),e.quotaDatas=t.list,e.quotaTotal=t.count,t.list.length>0?e.clickQuota(t.list[0].id):(e.quotaResultDatas=[],e.quotaResultPage=1,e.quotaResultTotal=0,e.quotaScheduleDatas=[],e.quotaSchedulePage=1,e.quotaScheduleTotal=0)}).catch(function(t){a.close(),e.$message.error(t)})},setHeight:function(){var e=this;setTimeout(function(){var t=window.innerHeight;e.tableHeight=t/3+"px"},200)},handleSelectionChange:function(e){this.multipleSelection=e},startSearch:function(){this.quotaPage=1,this.getQuotaDatas()},startAddQuota:function(){var e=o.a.convertDate(new Date,"yyyy-MM-dd hh:mm:ss");this.aaLevel2=[],this.aaLevel3=[],this.quotaForm={classify1:"",classify2:"",classify3:"",indiModel:"",indiType:"",baseList:[],indiName:"",indiCode:"",rule:"",agency:"",version:"",comment:"",creator:"管理员",create_time:e},this.addQuotaTitle="新增",this.addQuotaVisible=!0},startEditQuota:function(){var e=this,t=this.multipleSelection;if(1===t.length){o.a.convertDate(new Date,"yyyy-MM-dd hh:mm:ss");this.quotaForm={id:t[0].id,classify1Name:t[0].classify1Name,classify2Name:t[0].classify2Name,classify3Name:t[0].classify3Name,indiModelName:t[0].indiModelName,indiType:t[0].indiType,indiName:t[0].indiName,indiCode:t[0].indiCode,rule:t[0].rule,baseList:[],agency:t[0].orgId,agencyName:t[0].instName,version:t[0].version,comment:t[0].comment,creator:"管理员",create_time:o.a.convertDate(new Date(t[0].createDt),"yyyy-MM-dd hh:mm:ss")},t[0].baseList.forEach(function(t,a){e.quotaForm.baseList.push(t.basicId)}),this.addQuotaTitle="编辑",this.addQuotaVisible=!0}else this.$message.warning("请选择一个指标!")},checkQuotaForm:function(){return this.quotaForm.id||""!==this.quotaForm.classify1?this.quotaForm.id||""!==this.quotaForm.classify2?this.quotaForm.id||""!==this.quotaForm.classify3?this.quotaForm.id||""!==this.quotaForm.indiModel?""===this.quotaForm.indiType?(this.$message.warning("请选择指标分类!"),!1):""===this.quotaForm.indiName.trim()?(this.$message.warning("请输入指标名称!"),!1):!(!this.quotaForm.id&&""===this.quotaForm.agency)||(this.$message.warning("请选择所属机构!"),!1):(this.$message.warning("请选择指标项!"),!1):(this.$message.warning("请选择三级指标类别!"),!1):(this.$message.warning("请选择二级指标类别!"),!1):(this.$message.warning("请选择一级指标类别!"),!1)},submitQuotaForm:function(){this.checkQuotaForm()&&(this.quotaForm.id?this.editQuota():this.addQuota())},addQuota:function(){var e=this,t={type:1,classify1:this.quotaForm.classify1,classify2:this.quotaForm.classify2,classify3:this.quotaForm.classify3,indiModel:this.quotaForm.indiModel,indiType:this.quotaForm.indiType,baseList:this.quotaForm.baseList,indiName:this.quotaForm.indiName,orgId:this.quotaForm.agency,rule:this.quotaForm.rule,comment:this.quotaForm.comment,version:this.quotaForm.version};this.addQuotaAction(t).then(function(t){e.$message.success("新增成功!"),e.addQuotaVisible=!1,e.getQuotaDatas()}).catch(function(t){e.$message.error(t)})},editQuota:function(){var e=this,t={id:this.quotaForm.id,indiType:this.quotaForm.indiType,indiName:this.quotaForm.indiName,baseList:this.quotaForm.baseList,rule:this.quotaForm.rule,comment:this.quotaForm.comment,version:this.quotaForm.version};this.updateQuotaAction(t).then(function(t){e.$message.success("修改成功!"),e.addQuotaVisible=!1,e.getQuotaDatas()}).catch(function(t){e.$message.error(t)})},startDeleteQuota:function(){var e=this;0!==this.multipleSelection.length?this.$confirm("确认删除选中的指标？","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning"}).then(function(){e.deleteQuota()}).catch(function(e){console.log(e)}):this.$message.warning("请选择要删除的指标!")},deleteQuota:function(){var e=this,t=this.multipleSelection;this.deleteQuotaAction({id:t[0].id}).then(function(t){e.$message.success("删除成功!"),e.getQuotaDatas()}).catch(function(t){e.$message.error(t)})},clickQuota:function(e){this.resultQuota=e,this.quotaResultPage=1,this.getQuotaResultDatas(),this.getQuotaScheduleDatas()},clickTab:function(e){},getQuotaResultDatas:function(){var e=this;this.getResultListAction({indiId:this.resultQuota,pageNum:this.quotaResultPage,pageSize:this.pageSize}).then(function(t){e.quotaResultDatas=t.list,e.quotaResultTotal=t.count}).catch(function(t){e.$message.error(t)})},getQuotaScheduleDatas:function(){var e=this;this.getScheduleListAction({indiId:this.resultQuota}).then(function(t){e.quotaScheduleDatas=t.list,e.quotaScheduleTotal=t.count}).catch(function(t){e.$message.error(t)})},handleScheduleSelectionChange:function(e){this.multipleScheduleSelection=e},startAddQuotaSchedule:function(){var e=o.a.convertDate(new Date,"yyyy-MM-dd hh:mm:ss");this.scheduleForm={processInst:"",instType:"",isValid:"",creator:"管理员",create_time:e},this.addScheduleTitle="新增",this.addScheduleVisible=!0},startEditQuotaSchedule:function(){var e=this.multipleScheduleSelection;if(1===e.length){var t=o.a.convertDate(new Date,"yyyy-MM-dd hh:mm:ss");this.scheduleForm={id:e[0].id,processInst:e[0].processInst,instType:e[0].instType,isValid:e[0].isValid,creator:"管理员",create_time:t},this.addScheduleTitle="编辑",this.addScheduleVisible=!0}else this.$message.warning("请选择一个配置!")},checkScheduleForm:function(){return""===this.scheduleForm.processInst.trim()?(this.$message.warning("请输入处理指令!"),!1):""===this.scheduleForm.instType?(this.$message.warning("请选择指令类别!"),!1):""!==this.scheduleForm.isValid||(this.$message.warning("请选择状态!"),!1)},submitScheduleForm:function(){this.checkScheduleForm()&&(this.scheduleForm.id?this.editSchedule():this.addSchedule())},addSchedule:function(){var e=this;this.addScheduleAction({indiId:this.resultQuota,processInst:this.scheduleForm.processInst,instType:this.scheduleForm.instType,isValid:this.scheduleForm.isValid}).then(function(t){e.$message.success("新增成功！"),e.addScheduleVisible=!1,e.getQuotaScheduleDatas()}).catch(function(t){e.$message.error(t)})},editSchedule:function(){var e=this;this.updateScheduleAction({id:this.scheduleForm.id,indiId:this.resultQuota,processInst:this.scheduleForm.processInst,instType:this.scheduleForm.instType,isValid:this.scheduleForm.isValid}).then(function(t){e.$message.success("修改成功！"),e.addScheduleVisible=!1,e.getQuotaScheduleDatas()}).catch(function(t){e.$message.error(t)})},startDeleteQuotaSchedule:function(){var e=this;0!==this.multipleScheduleSelection.length?this.$confirm("确认删除选中的配置？","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning"}).then(function(){e.deleteQuotaSchedule()}).catch(function(e){console.log(e)}):this.$message.warning("请选择要删除的配置!")},deleteQuotaSchedule:function(){var e=this,t=this.multipleScheduleSelection;this.deleteScheduleAction({id:t[0].id}).then(function(t){e.$message.success("删除成功！"),e.getQuotaScheduleDatas()}).catch(function(t){e.$message.error(t)})}}),filters:{},watch:{"searchForm.classify1":function(e){this.searchForm.classify2="",this.searchForm.classify3="",this.aLevel3=[],""!==e?this.getTypes("aLevel2",this.searchForm.classify1):this.aLevel2=[]},"searchForm.classify2":function(e){this.searchForm.classify3="",""!==e?this.getTypes("aLevel3",this.searchForm.classify2):this.aLevel3=[]},"quotaForm.classify1":function(e){this.quotaForm.classify2="",this.quotaForm.classify3="",this.aaLevel3=[],""!==e?this.getTypes("aaLevel2",this.quotaForm.classify1):this.aaLevel2=[]},"quotaForm.classify2":function(e){this.quotaForm.classify3="",this.quotaForm.indiModel="",this.aQuotaItems=[],""!==e?this.getTypes("aaLevel3",this.quotaForm.classify2):this.aaLevel3=[]},"quotaForm.classify3":function(e){this.quotaForm.indiModel="",""!==e?this.getTypes("aQuotaItems",this.quotaForm.classify3):this.aQuotaItems=[]},"quotaForm.baseList":function(e){console.log(e)}},destroyed:function(){},beforeRouteLeave:function(e,t,a){a()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-panel bg-gray-lightest p-10"},[a("label",{staticClass:"m-r-5"},[e._v("一级指标类别：")]),e._v(" "),a("el-select",{staticClass:"search-selector m-r-20",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchForm.classify1,callback:function(t){e.$set(e.searchForm,"classify1",t)},expression:"searchForm.classify1"}},e._l(e.aLevel1,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("label",{staticClass:"m-r-5"},[e._v("二级指标类别：")]),e._v(" "),a("el-select",{staticClass:"search-selector m-r-20",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchForm.classify2,callback:function(t){e.$set(e.searchForm,"classify2",t)},expression:"searchForm.classify2"}},e._l(e.aLevel2,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("label",{staticClass:"m-r-5"},[e._v("三级指标类别：")]),e._v(" "),a("el-select",{staticClass:"search-selector m-r-20",staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.searchForm.classify3,callback:function(t){e.$set(e.searchForm,"classify3",t)},expression:"searchForm.classify3"}},e._l(e.aLevel3,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-button",{staticClass:"m-l-30",attrs:{size:"small",icon:"el-icon-search",type:"primary"},on:{click:e.startSearch}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"handle-panel m-t-10"},[a("el-button",{attrs:{size:"small",icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:e.startAddQuota}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:e.startEditQuota}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:e.startDeleteQuota}},[e._v("删除")])],1),e._v(" "),a("el-table",{ref:"quotaTable",staticClass:"m-t-10",staticStyle:{width:"100%"},attrs:{data:e.quotaDatas,border:"",height:e.tableHeight,"header-cell-style":e.tableHeadStyle},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"指标代码","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.indiCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"指标名称","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){e.clickQuota(t.row.id)}}},[e._v(e._s(t.row.indiName))]),e._v(" "),a("span")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"指标分类","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1===t.row.indiType?"基础指标":"分析指标"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"基础指标项","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.convertBasicQuotas(t.row.baseList)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计算规则","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.rule))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"所属机构","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.instName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"备注","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建人","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createdBy||"管理员"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("convertDate")(new Date(t.row.createDt),"yyyy-MM-dd hh:mm")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后修改人","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.lastEditBy||"管理员"))])]}}])})],1),e._v(" "),e.quotaTotal>0?a("el-pagination",{staticClass:"text-right m-t-20",attrs:{layout:"prev, pager, next","current-page":e.quotaPage,"page-size":e.pageSize,total:e.quotaTotal},on:{"update:currentPage":function(t){e.quotaPage=t},"current-change":e.getQuotaDatas}}):e._e(),e._v(" "),a("el-dialog",{attrs:{title:e.addQuotaTitle,visible:e.addQuotaVisible,width:"600px"},on:{"update:visible":function(t){e.addQuotaVisible=t}}},[a("el-form",{attrs:{model:e.quotaForm}},[a("el-form-item",{attrs:{label:"一级指标类别","label-width":e.formLabelWidth,required:""}},[e.quotaForm.id?a("span",[e._v(e._s(e.quotaForm.classify1Name))]):a("el-select",{staticClass:"search-selector m-r-20",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择一级指标类别"},model:{value:e.quotaForm.classify1,callback:function(t){e.$set(e.quotaForm,"classify1",t)},expression:"quotaForm.classify1"}},e._l(e.aLevel1,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"二级指标类别","label-width":e.formLabelWidth,required:""}},[e.quotaForm.id?a("span",[e._v(e._s(e.quotaForm.classify2Name))]):a("el-select",{staticClass:"search-selector m-r-20",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择二级指标类别"},model:{value:e.quotaForm.classify2,callback:function(t){e.$set(e.quotaForm,"classify2",t)},expression:"quotaForm.classify2"}},e._l(e.aaLevel2,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"三级指标类别","label-width":e.formLabelWidth,required:""}},[e.quotaForm.id?a("span",[e._v(e._s(e.quotaForm.classify3Name))]):a("el-select",{staticClass:"search-selector m-r-20",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择三级指标类别"},model:{value:e.quotaForm.classify3,callback:function(t){e.$set(e.quotaForm,"classify3",t)},expression:"quotaForm.classify3"}},e._l(e.aaLevel3,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"指标项","label-width":e.formLabelWidth,required:""}},[e.quotaForm.id?a("span",[e._v(e._s(e.quotaForm.indiModelName))]):a("el-select",{staticClass:"search-selector m-r-20",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择指标项"},model:{value:e.quotaForm.indiModel,callback:function(t){e.$set(e.quotaForm,"indiModel",t)},expression:"quotaForm.indiModel"}},e._l(e.aQuotaItems,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"指标分类","label-width":e.formLabelWidth,required:""}},[a("el-select",{staticClass:"search-selector m-r-20",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择指标分类"},model:{value:e.quotaForm.indiType,callback:function(t){e.$set(e.quotaForm,"indiType",t)},expression:"quotaForm.indiType"}},e._l(e.quotaTypes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"基础指标项","label-width":e.formLabelWidth,required:""}},[a("el-select",{staticClass:"search-selector m-r-20",staticStyle:{width:"440px"},attrs:{multiple:"",placeholder:"请选择指标分类"},model:{value:e.quotaForm.baseList,callback:function(t){e.$set(e.quotaForm,"baseList",t)},expression:"quotaForm.baseList"}},e._l(e.baseQuotas,function(e){return a("el-option",{key:e.id,attrs:{label:e.indiName,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"指标名称","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{placeholder:"请输入指标名称","auto-complete":"off"},model:{value:e.quotaForm.indiName,callback:function(t){e.$set(e.quotaForm,"indiName",t)},expression:"quotaForm.indiName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"指标代码","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.quotaForm.indiCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"计算规则","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入计算规则","auto-complete":"off"},model:{value:e.quotaForm.rule,callback:function(t){e.$set(e.quotaForm,"rule",t)},expression:"quotaForm.rule"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属机构","label-width":e.formLabelWidth,required:""}},[e.quotaForm.id?a("span",[e._v(e._s(e.quotaForm.agencyName))]):a("el-select",{staticClass:"search-selector m-r-20",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择所属机构"},model:{value:e.quotaForm.agency,callback:function(t){e.$set(e.quotaForm,"agency",t)},expression:"quotaForm.agency"}},e._l(e.agencies,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"版本","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入版本","auto-complete":"off"},model:{value:e.quotaForm.version,callback:function(t){e.$set(e.quotaForm,"version",t)},expression:"quotaForm.version"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入备注","auto-complete":"off"},model:{value:e.quotaForm.comment,callback:function(t){e.$set(e.quotaForm,"comment",t)},expression:"quotaForm.comment"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建人","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.quotaForm.creator))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.quotaForm.create_time))])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addQuotaVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitQuotaForm}},[e._v("确 定")])],1)],1),e._v(" "),a("el-tabs",{staticClass:"m-t-10",attrs:{type:"border-card"},on:{"tab-click":e.clickTab},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("el-tab-pane",{attrs:{label:"衍生指标结果视图",name:"QuotaResultView"}},[a("el-table",{ref:"resultTable",staticClass:"m-t-10",staticStyle:{width:"100%"},attrs:{data:e.quotaResultDatas,border:"",height:e.tableHeight,"header-cell-style":e.tableHeadStyle}},[a("el-table-column",{attrs:{prop:"id",label:"数据日期","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("convertDate")(new Date(t.row.dataDt))))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"indiName",label:"指标名称","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgCode",label:"机构编码","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"机构","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"currCd",label:"币种","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataValue",label:"数值","header-align":"center",align:"center"}})],1),e._v(" "),e.quotaResultTotal>0?a("el-pagination",{staticClass:"text-right m-t-20",attrs:{layout:"prev, pager, next","current-page":e.quotaResultPage,"page-size":e.pageSize,total:e.quotaResultTotal},on:{"update:currentPage":function(t){e.quotaResultPage=t},"current-change":e.getQuotaResultDatas}}):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{label:"衍生指标调度配置视图",name:"QuotaScheduleView"}},[a("div",{staticClass:"handle-panel bg-gray-lightest p-10  m-t-10"},[a("el-button",{attrs:{size:"small",icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:e.startAddQuotaSchedule}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:e.startEditQuotaSchedule}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:e.startDeleteQuotaSchedule}},[e._v("删除")])],1),e._v(" "),a("el-table",{ref:"scheduleTable",staticClass:"m-t-10",staticStyle:{width:"100%"},attrs:{data:e.quotaScheduleDatas,border:"",height:e.tableHeight,"header-cell-style":e.tableHeadStyle},on:{"selection-change":e.handleScheduleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"indiName",label:"自定义指标","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"processInst",label:"处理指令","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"指令类别","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.instType?"SQL语句":"存储过程"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0==t.row.isValid?"有效":"无效"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建人","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("管理员")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("convertDate")(new Date(t.row.createDt),"yyyy-MM-dd hh:mm")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后修改人","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("管理员")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最后修改时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("convertDate")(new Date(t.row.lastEditDt),"yyyy-MM-dd hh:mm")))])]}}])})],1),e._v(" "),e.quotaScheduleTotal>0?a("el-pagination",{staticClass:"text-right m-t-20",attrs:{layout:"prev, pager, next","current-page":e.quotaSchedulePage,"page-size":e.pageSize,total:e.quotaScheduleTotal},on:{"update:currentPage":function(t){e.quotaSchedulePage=t},"current-change":e.getQuotaScheduleDatas}}):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.addScheduleTitle,visible:e.addScheduleVisible,width:"600px"},on:{"update:visible":function(t){e.addScheduleVisible=t}}},[a("el-form",{attrs:{model:e.scheduleForm}},[a("el-form-item",{attrs:{label:"处理指令","label-width":e.formLabelWidth,required:""}},[a("el-input",{attrs:{placeholder:"请输入处理指令","auto-complete":"off"},model:{value:e.scheduleForm.processInst,callback:function(t){e.$set(e.scheduleForm,"processInst",t)},expression:"scheduleForm.processInst"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"指令类别","label-width":e.formLabelWidth,required:""}},[a("el-select",{staticClass:"search-selector m-r-20",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择指令类别"},model:{value:e.scheduleForm.instType,callback:function(t){e.$set(e.scheduleForm,"instType",t)},expression:"scheduleForm.instType"}},e._l(e.aDirectiveTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.scheduleForm.isValid,callback:function(t){e.$set(e.scheduleForm,"isValid",t)},expression:"scheduleForm.isValid"}},[a("el-radio",{attrs:{label:0}},[e._v("有效")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("无效")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"创建人","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.scheduleForm.creator))])]),e._v(" "),a("el-form-item",{attrs:{label:"创建时间","label-width":e.formLabelWidth}},[a("span",[e._v(e._s(e.scheduleForm.create_time))])])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addScheduleVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitScheduleForm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,n,!1,function(e){a("shgK")},"data-v-449e6a80",null);t.default=c.exports},shgK:function(e,t){}});
//# sourceMappingURL=6.b3748b2069d0b83940e4.js.map